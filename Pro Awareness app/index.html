<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Player Awareness Drill</title>
    <style>
        body, html { margin: 0; padding: 0; height: 100%; width: 100%; overflow: hidden; font-family: sans-serif; background: #111; color: white; }
        
        /* Two Column Layout */
        #menu { display: flex; flex-direction: row; height: 100vh; width: 100vw; box-sizing: border-box; }
        
        /* Left Side: Settings */
        #settings-side { 
            width: 60%; 
            padding: 20px; 
            overflow-y: auto; 
            display: flex; 
            flex-direction: column; 
            gap: 15px; 
            border-right: 2px solid #333;
            background: #1a1a1a;
        }
        
        /* Right Side: Start Buttons */
        #actions-side { 
            width: 40%; 
            display: flex; 
            flex-direction: column; 
            justify-content: center; 
            align-items: center; 
            padding: 20px; 
            gap: 20px; 
            background: #111;
        }

        .card { background: #222; padding: 12px; border-radius: 12px; border: 1px solid #333; width: 100%; box-sizing: border-box; }
        h1 { margin: 0 0 10px 0; color: #007bff; font-size: 1.4rem; text-transform: uppercase; letter-spacing: 1px; }
        
        /* Buttons on the Right */
        .start-btn { 
            padding: 25px; 
            font-size: 1.1rem; 
            cursor: pointer; 
            border-radius: 12px; 
            border: none; 
            color: white; 
            width: 100%; 
            font-weight: bold; 
            text-transform: uppercase;
            box-shadow: 0 4px 10px rgba(0,0,0,0.3);
        }
        .btn-blue { background: #007aff; }
        .btn-green { background: #28a745; }
        .btn-purple { background: #af52de; }

        .color-row { display: flex; flex-wrap: wrap; gap: 8px; margin-top: 8px; justify-content: flex-start; }
        .color-opt { display: flex; flex-direction: column; align-items: center; font-size: 0.7rem; gap: 4px; }
        .box { width: 30px; height: 30px; border-radius: 6px; border: 1px solid #555; }
        
        input[type="number"], textarea { width: 100%; padding: 10px; border-radius: 6px; border: none; background: #333; color: white; box-sizing: border-box; }
        .row { display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px; }
        label.section-title { font-size: 0.9rem; font-weight: bold; color: #007bff; display: block; margin-bottom: 5px; }

        /* Training Elements */
        #display-text { font-size: 40vh; width: 95%; text-align: center; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); pointer-events: none; z-index: 10; display: none; font-weight: 900; }
        #circle { width: 140px; height: 140px; border-radius: 50%; position: absolute; display: none; z-index: 8; transition: all 0.1s; }
        .corner-tl { top: 20px; left: 20px; } .corner-tr { top: 20px; right: 20px; }
        .corner-bl { bottom: 20px; left: 20px; } .corner-br { bottom: 20px; right: 20px; }
        #exit-hint { position: fixed; top: 10px; width: 100%; text-align: center; font-size: 0.8rem; opacity: 0.6; pointer-events: none; display: none; z-index: 100; }
    </style>
</head>
<body onclick="handleGlobalClick()">

    <div id="menu">
        <div id="settings-side">
            <h1>Player Awareness</h1>
            
            <div class="card">
                <label class="section-title">Background Colors</label>
                <div class="color-row">
                    <div class="color-opt"><div class="box" style="background:#ff3b30"></div><input type="checkbox" class="bg-check" value="#ff3b30" checked></div>
                    <div class="color-opt"><div class="box" style="background:#007aff"></div><input type="checkbox" class="bg-check" value="#007aff" checked></div>
                    <div class="color-opt"><div class="box" style="background:#4cd964"></div><input type="checkbox" class="bg-check" value="#4cd964"></div>
                    <div class="color-opt"><div class="box" style="background:#af52de"></div><input type="checkbox" class="bg-check" value="#af52de"></div>
                    <div class="color-opt"><div class="box" style="background:#ff9500"></div><input type="checkbox" class="bg-check" value="#ff9500"></div>
                    <div class="color-opt"><div class="box" style="background:#000000"></div><input type="checkbox" class="bg-check" value="#000000"></div>
                    <div class="color-opt"><div class="box" style="background:#ffffff"></div><input type="checkbox" class="bg-check" value="#ffffff"></div>
                </div>
            </div>

            <div class="card">
                <label class="section-title">Circle Colors (Mode 2)</label>
                <div class="color-row">
                    <div class="color-opt"><div class="box" style="background:#ff3b30"></div><input type="checkbox" class="circ-check" value="#ff3b30"></div>
                    <div class="color-opt"><div class="box" style="background:#007aff"></div><input type="checkbox" class="circ-check" value="#007aff"></div>
                    <div class="color-opt"><div class="box" style="background:#4cd964"></div><input type="checkbox" class="circ-check" value="#4cd964"></div>
                    <div class="color-opt"><div class="box" style="background:#af52de"></div><input type="checkbox" class="circ-check" value="#af52de"></div>
                    <div class="color-opt"><div class="box" style="background:#ff9500"></div><input type="checkbox" class="circ-check" value="#ff9500"></div>
                    <div class="color-opt"><div class="box" style="background:#000000"></div><input type="checkbox" class="circ-check" value="#000000"></div>
                    <div class="color-opt"><div class="box" style="background:#ffffff"></div><input type="checkbox" class="circ-check" value="#ffffff" checked></div>
                </div>
            </div>

            <div class="card">
                <label class="section-title">Sentence Mode</label>
                <textarea id="sentenceInput" rows="2" placeholder="Ex: TURN, GO LEFT, SHOOT"></textarea>
            </div>

            <div class="card">
                <div class="row"><label>Interval (Sec):</label> <input type="number" id="intervalInput" value="2.5" step="0.1" style="width:65px"></div>
                <div class="row"><label>Show Numbers:</label> <input type="checkbox" id="useNumbers" checked style="width:20px; height:20px;"></div>
                <div class="row"><label>Num Range:</label> <div><input type="number" id="minN" value="1" style="width:45px"> to <input type="number" id="maxN" value="9" style="width:45px"></div></div>
            </div>
        </div>

        <div id="actions-side">
            <button class="start-btn btn-blue" onclick="startMode(1)">Mode 1: Flash</button>
            <button class="start-btn btn-green" onclick="startMode(2)">Mode 2: Circle</button>
            <button class="start-btn btn-purple" onclick="startMode(3)">Mode 3: Sentence</button>
            <p style="font-size: 0.7rem; color: #666; text-align: center;">Triple-tap screen to exit.</p>
        </div>
    </div>

    <div id="exit-hint">TRIPLE TAP TO EXIT</div>
    <div id="display-text"></div>
    <div id="circle"></div>

    <script>
        let timer = null;
        let tapCount = 0;
        let tapTimer = null;
        let isRunning = false;

        function handleGlobalClick() {
            if (!isRunning) return;
            tapCount++;
            clearTimeout(tapTimer);
            if (tapCount === 3) { stopAll(); tapCount = 0; }
            else { tapTimer = setTimeout(() => { tapCount = 0; }, 500); }
        }

        function stopAll() {
            isRunning = false;
            clearTimeout(timer);
            document.body.style.backgroundColor = "#111";
            document.getElementById('circle').style.display = 'none';
            document.getElementById('display-text').style.display = 'none';
            document.getElementById('exit-hint').style.display = 'none';
            document.getElementById('menu').style.display = 'flex';
        }

        function startMode(modeType) {
            const bgList = Array.from(document.querySelectorAll('.bg-check:checked')).map(cb => cb.value);
            const circList = Array.from(document.querySelectorAll('.circ-check:checked')).map(cb => cb.value);
            const sentences = document.getElementById('sentenceInput').value.split(',').map(s => s.trim()).filter(s => s !== "");
            
            if (bgList.length === 0) return alert("Select background colors!");
            if (modeType === 2 && circList.length === 0) return alert("Select circle colors!");
            if (modeType === 3 && sentences.length === 0) return alert("Enter sentences!");

            isRunning = true;
            const ms = parseFloat(document.getElementById('intervalInput').value) * 1000;
            const useNums = document.getElementById('useNumbers').checked;
            const min = parseInt(document.getElementById('minN').value);
            const max = parseInt(document.getElementById('maxN').value);

            document.getElementById('menu').style.display = 'none';
            document.getElementById('exit-hint').style.display = 'block';
            setTimeout(() => { document.getElementById('exit-hint').style.display = 'none'; }, 2000);

            const text = document.getElementById('display-text');
            const circle = document.getElementById('circle');

            function loop() {
                if (!isRunning) return;
                const bgColor = bgList[Math.floor(Math.random() * bgList.length)];
                document.body.style.backgroundColor = bgColor;
                text.style.color = (bgColor === '#ffffff' || bgColor === '#4cd964' || bgColor === '#ff9500') ? 'black' : 'white';
                
                text.style.display = 'block';
                if (modeType === 3) {
                    text.style.fontSize = "12vh";
                    text.innerText = sentences[Math.floor(Math.random() * sentences.length)];
                } else {
                    text.style.fontSize = "40vh";
                    text.innerText = useNums ? Math.floor(Math.random() * (max - min + 1)) + min : "";
                }

                if (modeType === 2) {
                    circle.style.display = 'block';
                    circle.style.backgroundColor = circList[Math.floor(Math.random() * circList.length)];
                    circle.className = ['corner-tl', 'corner-tr', 'corner-bl', 'corner-br'][Math.floor(Math.random() * 4)];
                } else {
                    circle.style.display = 'none';
                }

                timer = setTimeout(loop, ms + (Math.random() * (ms * 0.3) - (ms * 0.15)));
            }
            loop();
        }
    </script>
</body>
</html>
